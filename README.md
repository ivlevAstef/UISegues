# UISegues
Это Простенькая библиотека для организации роутинга с помощью сторибоардов.
Сама библиотека делает небольшое расширение для UIViewController, но ценность её в предлогаемом подходе нежели в коде.

## Идеология
* Storyboard это Router
* Storyboard должен содержать названия ViewController-ов и переходы между ними. Больше на нем ничего не должно быть.
* Реализация UI делается или через код или с помощью xib отдельно.
* Для вызова переходов пишется отдельный swift файл, в определенном стиле.

## Зачем библиотека?
Сами по себе storyboard-ы и их использование из коробки не дают никаких средств чтобы передать параметры при осуществлении переходов. Библиотека устаняет эту проблему достаточно элегентным способом - добавляет функции для вызова перехода по имени, но при этом возвращает созданный ViewController.

## В чем профит?
* Отличное разделение ответственности - сторибоарды для роутинга, все остальное обычный код в соотстветствии с вашей архитектурой.
* Лучшего способа чем визуальный для показа переходов всеравно не найти - читать в коде переходы всеравно не удобно, по сравнению с графическим представлением
* С помощью не сложного кода все это типизируется.

## В чем минусы?
* storyboard и код routing-а живут отдельно друг от друга - может быть рассинхронизация.
* если у вас нету DI который может работать со storyboard, то будут проблемы с внедрением зависимостей - придется писать отдельную фабрику которая заполняет, а не создает.

## Пример использования

### Первый шаг
В начале библиотеку надо инициализировать.
Это делает следующим кодом:
```
_ = UISeguesInitializer()
```
Сделано это в виде создания класса, для того чтобы было легко интегрировать с DI.

### Второй шаг
Создаем обычный storyboard, выставляем у всех контроллеров высоту равную 1, и рисуем переходы между ними. Сами переходы называем как хотим но желательно логично. Одно условие - идентификатор ViewController-а должен быть такойже как его тип.

### Третий шаг
Определяемся с тем как будем делать вьюху. Из кода, с помощью xib, еще каким-нибудь способом. Это в обязанности библиотеки не входит - все зависит от вашей архитектуры.

### Четвертый шаг
Создаем файл. Называем его например `Routing.swift`

### Пятый шаг
Ну собственно говоря используем либу. Наша задача все связи нарисованные в storyboard перенести в код.
Выглядит это както так:
```
extension FirstViewController: UISegues {
	func showSecondViewController(_ parameter: String) {
		let vc = doSegue(identifier: "ShowSecondViewController", on: SecondViewController.self)
		vc.setParameter(parameter)
	}
}

extension SecondViewController: UISegues {
	func pop() {
		navigationController?.popViewController(animated: true)
	}

	func select(_ itemId: Int64) {
		findOnNavigation(ItemsViewController.self)?.setItem(itemId)
	}
}
```
По порядку:
1. Наследуем ViewController от протокола.
2. Для каждого значимого перехода делаем функцию.
3. Вызываем переход с помощью функции doSegue. Вначале идет название перехода, потом тип ViewController на который мы переходим.
4. В созданный ViewController передаем параметры, или делаем с ним все что хотим. Возможно он хранит presenter и передаем тогда параметры в него.

Как это выглядит в самом ViewController:
```
class FirstViewController {
	...
	private func clickOnButton() {
		showSecondViewController(someParameter)
	}
}
```

## Лайф хак


